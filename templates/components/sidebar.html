<div id="sidebar-container" class="relative">
  <div id="sidebar-overlay" class="fixed inset-0 bg-black bg-opacity-50 z-30 hidden md:hidden"></div>

  <aside id="sidebar" class="fixed top-0 left-0 w-64 h-full bg-gray-800 text-gray-300 transform -translate-x-full transition-transform duration-300 ease-in-out md:translate-x-0 md:relative md:w-64 z-40 flex flex-col">
    <div class="px-4 py-5 border-b border-gray-700 flex flex-col">
      <div class="flex items-center">
        <div class="bg-white p-1 rounded-md shadow-sm mr-3 flex-shrink-0">
          <img src="{{ url_for('static', filename='img/logo PT DI.webp') }}" alt="Logo PT DI" class="h-10 w-auto" />
        </div>
        <h2 class="text-xl font-bold text-white">
          {% if user.role == 'mechanic' %} Mechanic Area {% elif user.role in ['quality1', 'quality2'] %} Quality Area {% elif user.role == 'superadmin' %} Super Admin {% else %} MWS Admin {% endif %}
        </h2>
      </div>

      <div class="mt-4 pt-4 border-t border-gray-700 space-y-2">
        <p class="text-sm font-semibold text-white">{{ user.name }}</p>
        <p class="text-xs text-gray-400"><span class="font-semibold">NIK:</span> {{ user.nik }}</p>
        <p class="text-xs text-gray-400"><span class="font-semibold">Pekerjaan:</span> {{ user.position or 'None' }}</p>
        {% if user.area %} {% if user.area.assigned_shop_area %}
        <p class="text-xs text-gray-400">
          <span class="font-semibold">Shop Area:</span>
          {% if user.area.assigned_shop_area == ['*'] %} Semua Area {% else %} {{ user.area.assigned_shop_area|join(', ') }} {% endif %}
        </p>
        {% endif %} {% if user.area.assigned_customers %}
        <p class="text-xs text-gray-400">
          <span class="font-semibold">Customer:</span>
          {% if user.area.assigned_customers == ['*'] %} Semua Customer {% else %} {{ user.area.assigned_customers|join(', ') }} {% endif %}
        </p>
        {% endif %} {% endif %}
      </div>
    </div>

    <nav class="flex-grow px-2 py-4 space-y-2">
      {% if user.role == 'admin' %}
      <a href="{{ url_for('manage_users') }}" class="flex items-center px-4 py-2.5 text-sm font-medium rounded-lg hover:bg-gray-700 hover:text-white transition-colors duration-200">
        <i class="fas fa-users-cog fa-fw mr-3"></i> Kelola Pengguna
      </a>
      <a href="{{ url_for('create_mws') }}" class="flex items-center px-4 py-2.5 text-sm font-medium rounded-lg hover:bg-gray-700 hover:text-white transition-colors duration-200">
        <i class="fas fa-plus-circle fa-fw mr-3"></i> Informasi Detail
      </a>
      <a href="{{ url_for('admin_dashboard') }}" class="flex items-center px-4 py-2.5 text-sm font-medium rounded-lg hover:bg-gray-700 hover:text-white transition-colors duration-200">
        <i class="fas fa-tasks fa-fw mr-3"></i> Tracking List
      </a>
      <a href="{{ url_for('admin_dashboard', view='analytics') }}" class="flex items-center px-4 py-2.5 text-sm font-medium rounded-lg hover:bg-gray-700 hover:text-white transition-colors duration-200">
        <i class="fas fa-chart-pie fa-fw mr-3"></i> Dashboard
      </a>
      <a href="{{ url_for('all_strep_page') }}" class="flex items-center px-4 py-2.5 text-sm font-medium rounded-lg hover:bg-gray-700 hover:text-white transition-colors duration-200">
        <i class="fas fa-stream fa-fw mr-3"></i>
        All Strep
      </a>
      <a href="{{ url_for('control_page') }}" class="flex items-center px-4 py-2.5 text-sm font-medium rounded-lg hover:bg-gray-700 hover:text-white transition-colors duration-200">
        <i class="fas fa-cogs fa-fw mr-3"></i>
        Control
      </a>

      {% elif user.role == 'superadmin' %}
      <a href="{{ url_for('manage_users') }}" class="flex items-center px-4 py-2.5 text-sm font-medium rounded-lg hover:bg-gray-700 hover:text-white transition-colors duration-200">
        <i class="fas fa-users-cog fa-fw mr-3"></i> Kelola Pengguna
      </a>
      <a href="{{ url_for('create_mws') }}" class="flex items-center px-4 py-2.5 text-sm font-medium rounded-lg hover:bg-gray-700 hover:text-white transition-colors duration-200">
        <i class="fas fa-plus-circle fa-fw mr-3"></i> Informasi Detail
      </a>
      <a href="{{ url_for('superadmin_dashboard') }}" class="flex items-center px-4 py-2.5 text-sm font-medium rounded-lg hover:bg-gray-700 hover:text-white transition-colors duration-200">
        <i class="fas fa-tasks fa-fw mr-3"></i> Tracking List
      </a>
      <a href="{{ url_for('superadmin_dashboard', view='analytics') }}" class="flex items-center px-4 py-2.5 text-sm font-medium rounded-lg hover:bg-gray-700 hover:text-white transition-colors duration-200">
        <i class="fas fa-chart-pie fa-fw mr-3"></i> Dashboard
      </a>
      <a href="{{ url_for('all_strep_page') }}" class="flex items-center px-4 py-2.5 text-sm font-medium rounded-lg hover:bg-gray-700 hover:text-white transition-colors duration-200">
        <i class="fas fa-stream fa-fw mr-3"></i>
        All Strep
      </a>
      <a href="{{ url_for('control_page') }}" class="flex items-center px-4 py-2.5 text-sm font-medium rounded-lg hover:bg-gray-700 hover:text-white transition-colors duration-200">
        <i class="fas fa-cogs fa-fw mr-3"></i>
        Control
      </a>

      {% elif user.role == 'mechanic' %}
      <a href="{{ url_for('mechanic_dashboard') }}" class="flex items-center px-4 py-2.5 text-sm font-medium rounded-lg hover:bg-gray-700 hover:text-white transition-colors duration-200">
        <i class="fas fa-tasks fa-fw mr-3"></i> Tracking List
      </a>
      <a href="{{ url_for('mechanic_dashboard', view='analytics') }}" class="flex items-center px-4 py-2.5 text-sm font-medium rounded-lg hover:bg-gray-700 hover:text-white transition-colors duration-200">
        <i class="fas fa-chart-pie fa-fw mr-3"></i> Dashboard
      </a>
      <a href="{{ url_for('all_strep_page') }}" class="flex items-center px-4 py-2.5 text-sm font-medium rounded-lg hover:bg-gray-700 hover:text-white transition-colors duration-200">
        <i class="fas fa-stream fa-fw mr-3"></i>
        All Strep
      </a>
      <a href="{{ url_for('control_page') }}" class="flex items-center px-4 py-2.5 text-sm font-medium rounded-lg hover:bg-gray-700 hover:text-white transition-colors duration-200">
        <i class="fas fa-cogs fa-fw mr-3"></i>
        Control
      </a>

      {% elif user.role in ['quality1', 'quality2'] %}
      <a href="{{ url_for(user.role + '_dashboard') }}" class="flex items-center px-4 py-2.5 text-sm font-medium rounded-lg hover:bg-gray-700 hover:text-white transition-colors duration-200">
        <i class="fas fa-tasks fa-fw mr-3"></i> Tracking List
      </a>
      <a href="{{ url_for(user.role + '_dashboard', view='analytics') }}" class="flex items-center px-4 py-2.5 text-sm font-medium rounded-lg hover:bg-gray-700 hover:text-white transition-colors duration-200">
        <i class="fas fa-chart-pie fa-fw mr-3"></i> Dashboard
      </a>
      {% if user.role == 'quality1' %}
      <a href="{{ url_for('all_strep_page') }}" class="flex items-center px-4 py-2.5 text-sm font-medium rounded-lg hover:bg-gray-700 hover:text-white transition-colors duration-200">
        <i class="fas fa-stream fa-fw mr-3"></i>
        All Strep
      </a>

      <a href="{{ url_for('control_page') }}" class="flex items-center px-4 py-2.5 text-sm font-medium rounded-lg hover:bg-gray-700 hover:text-white transition-colors duration-200">
        <i class="fas fa-cogs fa-fw mr-3"></i>
        Control
      </a>
      {% endif %} {% endif %}
    </nav>
    <div class="px-2 py-4 border-t border-gray-700">
      <a href="#" id="logout-button-sidebar" class="flex items-center w-full mt-3 px-4 py-2.5 text-sm font-medium text-red-400 rounded-lg hover:bg-red-900/50 hover:text-red-300 transition-colors duration-200">
        <i class="fas fa-sign-out-alt w-6 mr-3 text-center"></i>
        Logout
      </a>
    </div>
  </aside>
</div>
